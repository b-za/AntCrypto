This system processes crypto trading history CSV files to generate detailed FIFO (First-In-First-Out) inventory tracking reports for tax purposes. It categorizes transactions into Buy, Sell, Fee, and Other, applies FIFO for cost basis calculation, and produces reports per currency and financial year.

## System Setup and File Structure
- **Root Directory:** `Crypto Ant/`
- **Input Data:** Place CSV files in `data/` subdirectory. Each CSV must have headers: Timestamp (UTC), Description, Reference, Value amount, Balance delta, Currency. Files are named like `ltc.csv`, `eth.csv`, etc.
- **Scripts:** Located in `scripts/` subdirectory.
  - `fifo_report.py`: Main script for processing data and generating FIFO/FY reports.
  - `overview_report.py`: Script to generate overview summary from FY reports.
  - `prompt.md`: This documentation.
- **Output Directory:** Reports are generated in `reports/` subdirectory, in a new timestamped subfolder (e.g., `2025_12_19_0725/`) each run to avoid overwriting.
- **Dependencies:** Requires Python 3 with `decimal`, `csv`, `datetime`, `collections` modules (standard library).

## Workflow for New Agents
1. **Place Data:** Ensure CSV files are in `data/`. If new data arrives, add/update CSVs there.
2. **Run FIFO Processor:** From `scripts/` directory, execute `python fifo_report.py`. This reads all CSVs from `../data/`, processes them (see logic below), and writes outputs to a new `../reports/YYYY_MM_DD_HHMM/` folder.
3. **Run Overview Generator:** Execute `python overview_report.py`. This finds the latest reports folder, parses FY CSVs, and adds `overview_report.csv` to that folder.
4. **Review Outputs:** Check the timestamped reports folder for all generated CSVs. Use for tax filing or analysis.

## Processing Logic Overview
Refer to `fifo_report.py` for full implementation details. Key points:
- **Data Prep:** Sorts by timestamp; calculates FY (March-Feb).
- **Categorization:** Based on Balance delta and Description keywords (e.g., 'Bought' for buys, 'Sold' for sells, 'fee' for fees).
- **FIFO:** Buys create lots; sells/others consume oldest lots first, splitting rows if needed.
- **Outputs:** See below for formats. Scripts handle edge cases like empty lots or remaining quantities.

## Output Formats

### Individual Currency FIFO Reports (e.g., ltc_fifo.csv)
Detailed per-transaction CSV with columns as defined in `fifo_report.py` (Type, Qty Change, etc.). Tracks running balances.

### Financial Year Reports (e.g., fy2021_report.csv)
Structured CSV with sections for Buys, Sells, Others, Fees, and Balances. See `generate_fy_report()` in `fifo_report.py` for exact layout.

### Overview Report (overview_report.csv)
Aggregated summary per FY: Gains/losses, net profit, total value, asset balances. Generated by `overview_report.py` parsing FY reports.

## Important Notes
- Always run `fifo_report.py` first, then `overview_report.py`.
- If data changes, re-run both scripts.
- Scripts assume data integrity; validate CSVs for correct formats.
- For code details, read `fifo_report.py` and `overview_report.py` directly.